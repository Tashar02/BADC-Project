<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane prefHeight="620.0" prefWidth="900.0"
            xmlns="http://javafx.com/javafx/8.0.171"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.farmer_seed_dealer_project.nusrat.Goal15Controller">
   <children>

      <!-- Header -->
      <Text layoutX="24.0" layoutY="45.0" text="Request Supply Reallocation/Transfer">
         <font>
            <Font name="System Bold" size="24.0"/>
         </font>
      </Text>

      <!-- Main Content -->
      <VBox layoutX="24.0" layoutY="70.0" spacing="20.0" prefWidth="852.0">
         <padding>
            <Insets top="10" right="20" bottom="10" left="10"/>
         </padding>

         <!-- OP: Available Supplies Section -->
         <VBox spacing="10.0" style="-fx-background-color: #E3F2FD; -fx-padding: 15; -fx-background-radius: 8;">
            <children>
               <Label text="Available Supplies for Reallocation:">
                  <font><Font name="System Bold" size="15.0"/></font>
               </Label>
               <TableView fx:id="suppliesTableView" prefHeight="150.0">
                  <columns>
                     <TableColumn fx:id="itemColumn" text="Supply Item" prefWidth="200.0"/>
                     <TableColumn fx:id="currentLocationColumn" text="Current Location" prefWidth="180.0"/>
                     <TableColumn fx:id="quantityColumn" text="Available Quantity" prefWidth="150.0"/>
                     <TableColumn fx:id="unitColumn" text="Unit" prefWidth="80.0"/>
                  </columns>
               </TableView>
            </children>
         </VBox>

         <!-- UID: Request Form -->
         <VBox spacing="15.0" style="-fx-background-color: #FFF3E0; -fx-padding: 15; -fx-background-radius: 8;">
            <children>
               <Label text="Reallocation Request Form:">
                  <font><Font name="System Bold" size="15.0"/></font>
               </Label>

               <GridPane hgap="15.0" vgap="12.0">

                  <!-- Supply Item -->
                  <Label text="Supply Item: *" GridPane.columnIndex="0" GridPane.rowIndex="0">
                     <font><Font size="13.0"/></font>
                  </Label>
                  <ComboBox fx:id="supplyItemCombo" promptText="Select supply item" prefWidth="300.0"
                            GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                  <!-- Quantity -->
                  <Label text="Quantity: *" GridPane.columnIndex="0" GridPane.rowIndex="1">
                     <font><Font size="13.0"/></font>
                  </Label>
                  <HBox spacing="10.0" GridPane.columnIndex="1" GridPane.rowIndex="1">
                     <children>
                        <TextField fx:id="quantityField" promptText="Enter quantity" prefWidth="150.0"/>
                        <Label fx:id="unitLabel" text="KG">
                           <font><Font size="13.0"/></font>
                        </Label>
                     </children>
                  </HBox>

                  <!-- Current Location -->
                  <Label text="Current Location: *" GridPane.columnIndex="0" GridPane.rowIndex="2">
                     <font><Font size="13.0"/></font>
                  </Label>
                  <ComboBox fx:id="currentLocationCombo" promptText="Select current location" prefWidth="300.0"
                            GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                  <!-- Desired Location -->
                  <Label text="Desired Location: *" GridPane.columnIndex="0" GridPane.rowIndex="3">
                     <font><Font size="13.0"/></font>
                  </Label>
                  <ComboBox fx:id="desiredLocationCombo" promptText="Select desired location" prefWidth="300.0"
                            GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                  <!-- Justification -->
                  <Label text="Justification:" GridPane.columnIndex="0" GridPane.rowIndex="4">
                     <font><Font size="13.0"/></font>
                  </Label>
                  <TextArea fx:id="justificationArea" promptText="Provide reason for reallocation (optional)"
                            prefWidth="300.0" prefHeight="70.0"
                            GridPane.columnIndex="1" GridPane.rowIndex="4"/>

               </GridPane>

               <!-- VL: Validation Message -->
               <Label fx:id="validationLabel" text="" textFill="RED" wrapText="true">
                  <font><Font size="12.0"/></font>
               </Label>

               <!-- Action Buttons -->
               <HBox spacing="15.0">
                  <children>
                     <Button text="Submit Request" onAction="#onSubmitRequest"
                             style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 14px;"
                             prefWidth="150.0" prefHeight="35.0"/>
                     <Button text="Clear Form" onAction="#onClearForm"
                             style="-fx-background-color: #757575; -fx-text-fill: white; -fx-font-size: 14px;"
                             prefWidth="120.0" prefHeight="35.0"/>
                  </children>
               </HBox>

            </children>
         </VBox>

         <!-- OP: Confirmation Message -->
         <VBox fx:id="confirmationBox" spacing="8.0" visible="false"
               style="-fx-background-color: #C8E6C9; -fx-padding: 15; -fx-background-radius: 8;">
            <children>
               <Label text="✓ Reallocation Request Submitted!">
                  <font><Font name="System Bold" size="15.0"/></font>
               </Label>
               <Label fx:id="requestIdLabel" text="Request ID: ">
                  <font><Font size="13.0"/></font>
               </Label>
               <Label fx:id="submissionDateLabel" text="Submission Date: ">
                  <font><Font size="13.0"/></font>
               </Label>
               <Label fx:id="statusLabel" text="Status: Pending Approval">
                  <font><Font size="13.0"/></font>
               </Label>
               <Label text="Your request will be reviewed by BADC officials. You will be notified of the approval status.">
                  <font><Font size="12.0"/></font>
               </Label>
            </children>
         </VBox>

      </VBox>

      <!-- Navigation Buttons -->
      <HBox layoutX="24.0" layoutY="570.0" spacing="10.0"
            AnchorPane.bottomAnchor="15.0" AnchorPane.leftAnchor="24.0">
         <children>
            <Button text="← Back to Dashboard" onAction="#onBackToDashboard"
                    style="-fx-font-size: 13px;" prefWidth="160.0" prefHeight="30.0"/>
            <Button text="View My Requests" onAction="#onViewMyRequests"
                    style="-fx-font-size: 13px;" prefWidth="150.0" prefHeight="30.0"/>
         </children>
      </HBox>

   </children>
</AnchorPane>
